/* SVG (c) Robby Kraft, MIT License */
(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.SVG={})})(this,function(a){"use strict";var f=Math.sin,g=Math.cos;function b(a){var b="    ";isNaN(parseInt(a))?b=a:1===a?b=" ":2===a?b="  ":3===a?b="   ":4===a?b="    ":5===a?b="     ":6===a?b="      ":7===a?b="       ":8===a?b="        ":9===a?b="         ":10===a?b="          ":11===a?b="           ":12===a?b="            ":void 0;var c=["\n"];for(let d=0;100>d;d++)c.push(c[d]+b);return c}function c(){this.step="\t",this.shift=b(this.step)}function d(a,b){return b-(a.replace(/\(/g,"").length-a.replace(/\)/g,"").length)}function e(a,b){return a.replace(/\s{1,}/g," ").replace(/ AND /ig,"~::~"+b+b+"AND ").replace(/ BETWEEN /ig,"~::~"+b+"BETWEEN ").replace(/ CASE /ig,"~::~"+b+"CASE ").replace(/ ELSE /ig,"~::~"+b+"ELSE ").replace(/ END /ig,"~::~"+b+"END ").replace(/ FROM /ig,"~::~FROM ").replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ").replace(/ HAVING /ig,"~::~HAVING ").replace(/ IN /ig," IN ").replace(/ JOIN /ig,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ").replace(/ ON /ig,"~::~"+b+"ON ").replace(/ OR /ig,"~::~"+b+b+"OR ").replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ").replace(/ OVER /ig,"~::~"+b+"OVER ").replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ").replace(/\)\s{0,}SELECT /ig,")~::~SELECT ").replace(/ THEN /ig," THEN~::~"+b+"").replace(/ UNION /ig,"~::~UNION~::~").replace(/ USING /ig,"~::~USING ").replace(/ WHEN /ig,"~::~"+b+"WHEN ").replace(/ WHERE /ig,"~::~WHERE ").replace(/ WITH /ig,"~::~WITH ").replace(/ ALL /ig," ALL ").replace(/ AS /ig," AS ").replace(/ ASC /ig," ASC ").replace(/ DESC /ig," DESC ").replace(/ DISTINCT /ig," DISTINCT ").replace(/ EXISTS /ig," EXISTS ").replace(/ NOT /ig," NOT ").replace(/ NULL /ig," NULL ").replace(/ LIKE /ig," LIKE ").replace(/\s{0,}SELECT /ig,"SELECT ").replace(/\s{0,}UPDATE /ig,"UPDATE ").replace(/ SET /ig," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}c.prototype.xml=function(a,c){var d=a.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),e=d.length,f=!1,g=0,h="",i=c?b(c):this.shift;for(let b=0;b<e;b++)-1<d[b].search(/<!/)?(h+=i[g]+d[b],f=!0,(-1<d[b].search(/-->/)||-1<d[b].search(/\]>/)||-1<d[b].search(/!DOCTYPE/))&&(f=!1)):-1<d[b].search(/-->/)||-1<d[b].search(/\]>/)?(h+=d[b],f=!1):/^<\w/.exec(d[b-1])&&/^<\/\w/.exec(d[b])&&/^<[\w:\-\.\,]+/.exec(d[b-1])==/^<\/[\w:\-\.\,]+/.exec(d[b])[0].replace("/","")?(h+=d[b],f||g--):-1<d[b].search(/<\w/)&&-1==d[b].search(/<\//)&&-1==d[b].search(/\/>/)?h=f?h+=d[b]:h+=i[g++]+d[b]:-1<d[b].search(/<\w/)&&-1<d[b].search(/<\//)?h=f?h+=d[b]:h+=i[g]+d[b]:-1<d[b].search(/<\//)?h=f?h+=d[b]:h+=i[--g]+d[b]:-1<d[b].search(/\/>/)?h=f?h+=d[b]:h+=i[g]+d[b]:h+=-1<d[b].search(/<\?/)?i[g]+d[b]:-1<d[b].search(/xmlns\:/)||-1<d[b].search(/xmlns\=/)?i[g]+d[b]:d[b];return"\n"==h[0]?h.slice(1):h},c.prototype.json=function(a,b){var b=b?b:this.step;return"undefined"==typeof JSON?a:"string"==typeof a?JSON.stringify(JSON.parse(a),null,b):"object"==typeof a?JSON.stringify(a,null,b):a},c.prototype.css=function(a,c){var d=a.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),e=d.length,f=0,g="",h=c?b(c):this.shift;for(let b=0;b<e;b++)g+=/\{/.exec(d[b])?h[f++]+d[b]:/\}/.exec(d[b])?h[--f]+d[b]:/\*\\/.exec(d[b])?h[f]+d[b]:h[f]+d[b];return g.replace(/^\n{1,}/,"")},c.prototype.sql=function(a,c){var f=a.replace(/\s{1,}/g," ").replace(/\'/ig,"~::~'").split("~::~"),g=f.length,h=[],i=0,j=this.step,k=0,l="",m=c?b(c):this.shift;for(let b=0;b<g;b++)h=b%2?h.concat(f[b]):h.concat(e(f[b],j));g=h.length;for(let b=0;b<g;b++)k=d(h[b],k),/\s{0,}\s{0,}SELECT\s{0,}/.exec(h[b])&&(h[b]=h[b].replace(/\,/g,",\n"+j+j+"")),/\s{0,}\s{0,}SET\s{0,}/.exec(h[b])&&(h[b]=h[b].replace(/\,/g,",\n"+j+j+"")),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(h[b])?(i++,l+=m[i]+h[b]):/\'/.exec(h[b])?(1>k&&i&&i--,l+=h[b]):(l+=m[i]+h[b],1>k&&i&&i--);return l=l.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n"),l},c.prototype.xmlmin=function(a,b){var c=b?a:a.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return c.replace(/>\s{0,}</g,"><")},c.prototype.jsonmin=function(a){return"undefined"==typeof JSON?a:JSON.stringify(JSON.parse(a),null,0)},c.prototype.cssmin=function(a,b){var c=b?a:a.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return c.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},c.prototype.sqlmin=function(a){return a.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};var h=new c;const i="http://www.w3.org/2000/svg",j=function(a,b,c,d){null!=b&&a.setAttributeNS(null,"class",b),null!=c&&a.setAttributeNS(null,"id",c),null!=d&&d.appendChild(a)},k=function(a,b){if(null!=b&&b.constructor===Array){let c=b.map(a=>a.constructor===Array?a:[a.x,a.y]).reduce((a,b)=>a+b[0]+","+b[1]+" ","");a.setAttributeNS(null,"points",c)}},l=function(a,b,c,e,h,i,j=!1){let k=[b+g(h)*e,c+f(h)*e],l=[g(h)*e,f(h)*e],m=[g(i)*e,f(i)*e],n=[m[0]-l[0],m[1]-l[1]],o=l[0]*m[1]-l[1]*m[0],p=l[0]*m[0]+l[1]*m[1],q=0<Math.atan2(o,p)?0:1,r=j?"M "+b+","+c+" l "+l[0]+","+l[1]+" ":"M "+k[0]+","+k[1]+" ";r+=["a ",e,e,0,q,1,n[0],n[1]].join(" "),j&&(r+=" Z"),a.setAttributeNS(null,"d",r)},m=function(a,b,c,d){let e=document.createElementNS(i,"polygon");return k(e,a),j(e,b,c,d),e},n=function(a,b,c){let d=document.createElementNS(i,"svg");return j(d,a,b,c),d},o=function(a,b,c,e,f,g=0){let h=e/1-e,d=[b-h-g,c-h-g,e+2*h+2*g,f+2*h+2*g].join(" ");a.setAttributeNS(null,"viewBox",d)},p=function(a){let b=a.getBoundingClientRect(),c=0==b.width?640:b.width,d=0==b.height?480:b.height;o(a,0,0,c,d)},q=function(a){let b=a.getAttribute("viewBox");return null==b?void 0:b.split(" ").map(a=>parseFloat(a))},r=function(a,b,c=0,d=0){1e-8>b&&(b=.01);let e=a.createSVGMatrix().translate(c,d).scale(1/b).translate(-c,-d),f=q(a);null==f&&p(a);let g=a.createSVGPoint(),h=a.createSVGPoint();g.x=f[0],g.y=f[1],h.x=f[0]+f[2],h.y=f[1]+f[3];let i=g.matrixTransform(e),j=h.matrixTransform(e);o(a,i.x,i.y,j.x-i.x,j.y-i.y)},s=function(a,b,c){let d=q(a);null==d&&p(a),d[0]+=b,d[1]+=c,a.setAttributeNS(null,"viewBox",d.join(" "))},t=function(a,b,c){let d=a.createSVGPoint();d.x=b,d.y=c;let e=d.matrixTransform(a.getScreenCTM().inverse()),f=[e.x,e.y];return f.x=e.x,f.y=e.y,f},u=function(b,c="image.svg"){let d=document.createElement("a"),a=new window.XMLSerializer().serializeToString(b),e=h.xml(a),f=new window.Blob([e],{type:"text/plain"});d.setAttribute("href",window.URL.createObjectURL(f)),d.setAttribute("download",c),d.click()},v=new window.DOMParser().parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,w=function(a,b){if("string"==typeof a||a instanceof String){let c=new window.DOMParser().parseFromString(a,"text/xml");if(0===c.getElementsByTagNameNS(v,"parsererror").length){let a=c.documentElement;return null!=b&&b(a),a}fetch(a).then(a=>a.text()).then(a=>new window.DOMParser().parseFromString(a,"text/xml")).then(a=>{let c=a.getElementsByTagName("svg");if(null==c||0===c.length)throw"error, valid XML found, but no SVG element";return null!=b&&b(c[0]),c[0]})}else if(a instanceof Document)return b(a),a};a.Image=function(){function a(){v.addEventListener("mouseup",g,!1),v.addEventListener("mousedown",f,!1),v.addEventListener("mousemove",e,!1),v.addEventListener("mouseleave",h,!1),v.addEventListener("mouseenter",i,!1),v.addEventListener("touchend",g,!1),v.addEventListener("touchmove",k,!1),v.addEventListener("touchstart",j,!1),v.addEventListener("touchcancel",g,!1)}function b(){let a=B.position.slice();return Object.keys(B).filter(a=>"object"==typeof a).forEach(b=>a[b]=B[b].slice()),Object.keys(B).filter(a=>"object"!=typeof a).forEach(b=>a[b]=B[b]),Object.freeze(a)}function c(a,b){B.prev=B.position,B.position=t(v,a,b),B.x=B.position[0],B.y=B.position[1]}function d(){B.drag=[B.position[0]-B.pressed[0],B.position[1]-B.pressed[1]],B.drag.x=B.drag[0],B.drag.y=B.drag[1]}function e(a){c(a.clientX,a.clientY),B.isPressed&&d(),null!=O&&O(b())}function f(a){B.isPressed=!0,B.pressed=t(v,a.clientX,a.clientY),null!=P&&P(b())}function g(){B.isPressed=!1,null!=Q&&Q(b())}function h(a){c(a.clientX,a.clientY),null!=R&&R(b())}function i(a){c(a.clientX,a.clientY),null!=S&&S(b())}function j(a){a.preventDefault();let c=a.touches[0];null==c||(B.isPressed=!0,B.pressed=t(v,c.clientX,c.clientY),null!=P&&P(b()))}function k(a){a.preventDefault();let e=a.touches[0];null==e||(c(e.clientX,e.clientY),B.isPressed&&d(),null!=O&&O(b()))}function l(a){null!=T&&clearInterval(V),T=a,null!=T&&(U=0,V=setInterval(()=>{let a={time:v.getCurrentTime(),frame:U++};T(a)},1e3/60))}let m,p=Array.from(arguments),v=n(),x=1,z=0,A=v.createSVGMatrix(),B=Object.create(null);Object.assign(B,{isPressed:!1,position:[0,0],pressed:[0,0],drag:[0,0],prev:[0,0],x:0,y:0});const C=function(a,b=0,c=0){x=a,r(v,a,b,c)},D=function(a,b){s(v,a,b)},E=function(a,b,c,d){o(v,a,b,c,d,z)},F=function(){return q(v)},G=function(a){v.appendChild(a)},H=function(a){for(null==a&&(a=v);a.lastChild;)a.removeChild(a.lastChild)},I=function(a="image.svg"){return u(v,a)},J=function(a,b){if(null!=a&&null!=b){let c=q(v);o(v,c[0],c[1],a,b,z),v.setAttributeNS(null,"width",a),v.setAttributeNS(null,"height",b)}},K=function(){let a=parseInt(v.getAttributeNS(null,"width"));return null==a?v.getBoundingClientRect().width:a},L=function(){let a=parseInt(v.getAttributeNS(null,"height"));return null==a?v.getBoundingClientRect().height:a},M=function(){let b=p.filter(a=>"function"==typeof a),c=p.filter(a=>!isNaN(a)),d=p.filter(a=>a instanceof HTMLElement).shift(),e=p.filter(b=>"string"==typeof b||b instanceof String).map(a=>document.getElementById(a)).shift();if(m=null==d?null==e?document.body:e:d,m.appendChild(v),2<=c.length)v.setAttributeNS(null,"width",c[0]),v.setAttributeNS(null,"height",c[1]),o(v,0,0,c[0],c[1]);else if(null==v.getAttribute("viewBox")){let a=v.getBoundingClientRect();o(v,0,0,a.width,a.height)}1<=b.length&&b[0](),a()};let N=p.filter(a=>!isNaN(a));2<=N.length&&(v.setAttributeNS(null,"width",N[0]),v.setAttributeNS(null,"height",N[1]),o(v,0,0,N[0],N[1])),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",M):M();let O,P,Q,R,S,T,U,V;return{zoom:C,translate:D,appendChild:G,removeChildren:H,load:function(b,c){w(b,function(b,d){null!=b&&(m.removeChild(v),v=b,m.appendChild(v),a()),null!=c&&c(b,d)})},save:I,setViewBox:E,getViewBox:F,size:J,get mouse(){return b()},get scale(){return x},get svg(){return v},get width(){return K()},get height(){return L()},set width(a){v.setAttributeNS(null,"width",a)},set height(a){v.setAttributeNS(null,"height",a)},set onMouseMove(a){O=a},set onMouseDown(a){P=a},set onMouseUp(a){Q=a},set onMouseLeave(a){R=a},set onMouseEnter(a){S=a},set animate(a){l(a)}}},a.setPoints=k,a.setArc=l,a.line=function(a,b,c,d,e,f,g){let h=document.createElementNS(i,"line");return h.setAttributeNS(null,"x1",a),h.setAttributeNS(null,"y1",b),h.setAttributeNS(null,"x2",c),h.setAttributeNS(null,"y2",d),j(h,e,f,g),h},a.circle=function(a,b,c,d,e,f){let g=document.createElementNS(i,"circle");return g.setAttributeNS(null,"cx",a),g.setAttributeNS(null,"cy",b),g.setAttributeNS(null,"r",c),j(g,d,e,f),g},a.rect=function(a,b,c,d,e,f,g){let h=document.createElementNS(i,"rect");return h.setAttributeNS(null,"x",a),h.setAttributeNS(null,"y",b),h.setAttributeNS(null,"width",c),h.setAttributeNS(null,"height",d),j(h,e,f,g),h},a.polygon=m,a.polyline=function(a,b,c,d){let e=document.createElementNS(i,"polyline");return k(e,a),j(e,b,c,d),e},a.bezier=function(a,b,c,d,e,f,g,h,k,l,m){let n=document.createElementNS(i,"path");return n.setAttributeNS(null,"d","M "+a+","+b+" C "+c+","+d+" "+e+","+f+" "+g+","+h),j(n,k,l,m),n},a.text=function(a,b,c,d,e,f){let g=document.createElementNS(i,"text");return g.innerHTML=a,g.setAttributeNS(null,"x",b),g.setAttributeNS(null,"y",c),j(g,d,e,f),g},a.wedge=function(a,b,c,d,e,f,g,h){let k=document.createElementNS(i,"path");return l(k,a,b,c,d,e,!0),j(k,f,g,h),k},a.arc=function(a,b,c,d,e,f,g,h){let k=document.createElementNS(i,"path");return l(k,a,b,c,d,e,!1),j(k,f,g,h),k},a.regularPolygon=function(b,c,a,d,e,h,i){var j=Math.PI;let k=.5*(2*j/d),l=g(k)*a,n=Array.from(Array(d)).map((e,h)=>{let i=-2*j*h/d+k,a=b+l*f(i),m=c+l*g(i);return[a,m]});return m(n,e,h,i)},a.group=function(a,b,c){let d=document.createElementNS(i,"g");return j(d,a,b,c),d},a.svg=n,a.addClass=function(a,b){if(null==a)return;let c=a.getAttribute("class");c==null&&(c="");let d=c.split(" ").filter(a=>a!==b);d.push(b),a.setAttributeNS(null,"class",d.join(" "))},a.removeClass=function(a,b){if(null==a)return;let c=a.getAttribute("class");c==null&&(c="");let d=c.split(" ").filter(a=>a!==b);a.setAttributeNS(null,"class",d.join(" "))},a.setId=function(a,b){null==a||a.setAttributeNS(null,"id",b)},a.removeChildren=function(a){for(;a.lastChild;)a.removeChild(a.lastChild)},a.setViewBox=o,a.setDefaultViewBox=p,a.getViewBox=q,a.scale=r,a.translate=s,a.convertToViewBox=t,a.save=u,a.load=w,Object.defineProperty(a,"__esModule",{value:!0})});
