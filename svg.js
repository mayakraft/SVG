!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).SVG=n()}(this,(function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var r={init:function(){}};function o(){return r.init.apply(r,arguments)}var i="class",a="function",c="undefined",u="number",s="string",f="object",l="svg",d="path",p="id",h="style",v="viewBox",g="transform",m="points",y="stroke",b="none",A="arrow",w="head",x="tail",E=("undefined"==typeof window?"undefined":t(window))!==c&&t(window.document)!==c,C=("undefined"==typeof process?"undefined":t(process))!==c&&null!=process.versions&&null!=process.versions.node;("undefined"==typeof self?"undefined":t(self))===f&&self.constructor&&self.constructor.name;var j=[];j[10]='"error 010: window" not set. if using node/deno, include package @xmldom/xmldom, set to the main export ( ear.window = xmldom; )';var O={window:void 0};E&&(O.window=window);var k=function(){if(void 0===O.window)throw j[10];return O.window},P="http://www.w3.org/2000/svg",S={s:["svg"],d:["defs"],h:["desc","filter","metadata","style","script","title","view"],c:["cdata"],g:["g"],v:["circle","ellipse","line","path","polygon","polyline","rect"],t:["text"],i:["marker","symbol","clipPath","mask"],p:["linearGradient","radialGradient","pattern"],cT:["textPath","tspan"],cG:["stop"],cF:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]},M=function(t,n){return[t[0]+n[0],t[1]+n[1]]},N=function(t,n){return[t[0]-n[0],t[1]-n[1]]},T=function(t,n){return[t[0]*n,t[1]*n]},L=function(t){return Math.pow(t[0],2)+Math.pow(t[1],2)},_=function(t){return Math.sqrt(L(t))},B=function(t,n){return L(N(t,n))},z=function(t,n){return Math.sqrt(B(t,n))},F=function(t,n){return[Math.cos(t)*n,Math.sin(t)*n]},D=Object.freeze({__proto__:null,svg_add2:M,svg_sub2:N,svg_scale2:T,svg_magnitudeSq2:L,svg_magnitude2:_,svg_distanceSq2:B,svg_distance2:z,svg_polar_to_cart:F}),G=function(t,n,e,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(null==o)return"";var a=F(r,e),c=F(o,e),u=[c[0]-a[0],c[1]-a[1]],s=a[0]*c[1]-a[1]*c[0],f=a[0]*c[0]+a[1]*c[1],l=Math.atan2(s,f)>0?0:1,d=i?"M ".concat(t,",").concat(n," l ").concat(a[0],",").concat(a[1]," "):"M ".concat(t+a[0],",").concat(n+a[1]," ");return d+=["a ",e,e,0,l,1,u[0],u[1]].join(" "),i&&(d+=" Z"),d},U=function(t,n,e,r,o){return[G(t,n,e,r,o,!1)]},R={arc:{nodeName:d,attributes:["d"],args:U,methods:{setArc:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.setAttribute("d",U.apply(void 0,e))}}}},q=function(t,n,e,r,o){return[G(t,n,e,r,o,!0)]},V={wedge:{nodeName:d,args:q,attributes:["d"],methods:{setArc:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.setAttribute("d",q.apply(void 0,e))}}}},I=128,Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Array.from(Array(129)).map((function(t,n){return(n-I)/I*2+1})).map((function(o){return[t+(o+1)*e*.5,n+Math.pow(o,2)*r]}))},X={parabola:{nodeName:"polyline",attributes:[m],args:function(t,n,e,r){return[Z(t,n,e,r).map((function(t){return"".concat(t[0],",").concat(t[1])})).join(" ")]}}},Y=function(t,n,e,r){var o=[n,e];return Array.from(Array(t)).map((function(n,e){return 2*Math.PI*(e/t)})).map((function(t){return[Math.cos(t),Math.sin(t)]})).map((function(t){return o.map((function(n,e){return n+r*t[e]}))}))},$={regularPolygon:{nodeName:"polygon",attributes:[m],args:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[Y(t,n,e,r).map((function(t){return"".concat(t[0],",").concat(t[1])})).join(" ")]}}},H={roundRect:{nodeName:d,attributes:["d"],args:function(t,n,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;o>e/2&&(o=e/2),o>r/2&&(o=r/2);var i=e-2*o,a=r-2*o,c="A".concat(o," ").concat(o," 0 0 1");return[["M".concat(t+(e-i)/2,",").concat(n),"h".concat(i),c,"".concat(t+e,",").concat(n+(r-a)/2),"v".concat(a),c,"".concat(t+e-o,",").concat(n+r),"h".concat(-i),c,"".concat(t,",").concat(n+r-o),"v".concat(-a),c,"".concat(t+o,",").concat(n)].join(" ")]}}},Q={toCamel:function(t){return t.replace(/([-_][a-z])/gi,(function(t){return t.toUpperCase().replace("-","").replace("_","")}))},toKebab:function(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase()},capitalized:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},K=function(n){return null!=n&&t(n[Symbol.iterator])===a},W=function e(){switch(arguments.length){case void 0:case 0:return Array.from(arguments);case 1:return K(arguments[0])&&t(arguments[0])!==s?e.apply(void 0,n(arguments[0])):[arguments[0]];default:return Array.from(arguments).map((function(t){return K(t)?n(e(t)):t}))}},J=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return e.filter((function(n){return t(n)===u})).concat(e.filter((function(n){return t(n)===f&&null!==n})).map((function(n){return t(n.x)===u?[n.x,n.y]:t(n[0])===u?[n[0],n[1]]:void 0})).filter((function(t){return void 0!==t})).reduce((function(t,n){return t.concat(n)}),[]))},tt=[x,w],nt=function(t){return t.join(",")},et=function(t){return"M"+t.map((function(t){return t.join(",")})).join("L")+"Z"},rt=function(n,e,r){"boolean"===t(e)?n.options[r].visible=e:t(e)===f?(Object.assign(n.options[r],e),null==e.visible&&(n.options[r].visible=!0)):null==e&&(n.options[r].visible=!0)},ot=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w,o=n.getElementsByClassName("".concat(A,"-").concat(r))[0];Object.keys(e).map((function(t){return{key:t,fn:o[Q.toCamel(t)]}})).filter((function(n){return t(n.fn)===a&&"class"!==n.key})).forEach((function(t){return t.fn(e[t.key])})),Object.keys(e).filter((function(t){return"class"===t})).forEach((function(t){return o.classList.add(e[t])}))},it=function(t){var n=function(t){var n=[[0,1],[2,3]].map((function(n){return n.map((function(n){return t.points[n]||0}))})),e=N(n[1],n[0]),r=M(n[0],T(e,.5)),o=_(e),i=tt.map((function(n){return t[n].visible?(1+t[n].padding)*t[n].height*2.5:0})).reduce((function(t,n){return t+n}),0);if(o<i){var a=0===o?[i,0]:T(e,i/o);n=[N,M].map((function(t){return t(r,T(a,.5))})),e=N(n[1],n[0])}var c=[e[1],-e[0]],u=M(r,T(c,t.bend)),s=n.map((function(t){return N(u,t)})),f=s.map((function(t){return _(t)})),l=s.map((function(t,n){return 0===f[n]?t:T(t,1/f[n])})),d=l.map((function(t){return T(t,-1)})),p=d.map((function(t){return[t[1],-t[0]]})),h=tt.map((function(n,e){return t[n].padding?t[n].padding:t.padding?t.padding:0})),v=tt.map((function(n,e){return t[n].height*(t[n].visible?1:0)})).map((function(t,n){return t+h[n]})),g=n.map((function(t,n){return M(t,T(l[n],v[n]))}));c=[(e=N(g[1],g[0]))[1],-e[0]],r=M(g[0],T(e,.5)),u=M(r,T(c,t.bend));var m=g.map((function(n,e){return M(n,T(N(u,n),t.pinch))})),y=tt.map((function(n,e){return[M(g[e],T(d[e],t[n].height)),M(g[e],T(p[e],t[n].width/2)),M(g[e],T(p[e],-t[n].width/2))]}));return{line:"M".concat(nt(g[0]),"C").concat(nt(m[0]),",").concat(nt(m[1]),",").concat(nt(g[1])),tail:et(y[0]),head:et(y[1])}}(t.options);return Object.keys(n).map((function(n){return{path:n,element:t.getElementsByClassName("".concat(A,"-").concat(n))[0]}})).filter((function(t){return t.element})).map((function(t){return t.element.setAttribute("d",n[t.path]),t})).filter((function(n){return t.options[n.path]})).forEach((function(n){return n.element.setAttribute("visibility",t.options[n.path].visible?"visible":"hidden")})),t},at=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return t.options.points=J.apply(void 0,n(W.apply(void 0,r))).slice(0,4),it(t)},ct={setPoints:at,points:at,bend:function(t,n){return t.options.bend=n,it(t)},pinch:function(t,n){return t.options.pinch=n,it(t)},padding:function(t,n){return t.options.padding=n,it(t)},head:function(t,n){return rt(t,n,w),ot(t,n,w),it(t)},tail:function(t,n){return rt(t,n,x),ot(t,n,x),it(t)},getLine:function(t){return t.getElementsByClassName("".concat(A,"-line"))[0]},getHead:function(t){return t.getElementsByClassName("".concat(A,"-").concat(w))[0]},getTail:function(t){return t.getElementsByClassName("".concat(A,"-").concat(x))[0]}},ut=Object.keys({head:{visible:!1,width:8,height:10,padding:0},tail:{visible:!1,width:8,height:10,padding:0},bend:0,padding:0,pinch:.618,points:[]}),st=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];for(var o=0;o<e.length;o+=1)if(t(e[o])===f)for(var i=Object.keys(e[o]),a=0;a<i.length;a+=1)if(ut.includes(i[a]))return e[o]},ft={arrow:{nodeName:"g",attributes:[],args:function(){return[]},methods:ct,init:function(t){t.classList.add(A);var n=["line",x,w].map((function(n){return o.path().addClass("".concat(A,"-").concat(n)).appendTo(t)}));n[0].setAttribute(h,"fill:none;"),n[1].setAttribute(y,b),n[2].setAttribute(y,b),t.options={head:{visible:!1,width:8,height:10,padding:0},tail:{visible:!1,width:8,height:10,padding:0},bend:0,padding:0,pinch:.618,points:[]};for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];ct.setPoints.apply(ct,[t].concat(r));var a=st.apply(void 0,r);return a&&Object.keys(a).filter((function(t){return ct[t]})).forEach((function(n){return ct[n](t,a[n])})),t}}},lt=function(){return W(arguments).reduce((function(t,n){return t.concat(n)}),[])},dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=[t[0]||0,t[1]||0],o=[t[2]||0,t[3]||0],i=N(o,r),a=M(r,T(i,.5)),c=[i[1],-i[0]],u=M(a,T(c,n)),s=M(r,T(N(u,r),e)),f=M(o,T(N(u,o),e));return"M".concat(r[0],",").concat(r[1],"C").concat(s[0],",").concat(s[1]," ").concat(f[0],",").concat(f[1]," ").concat(o[0],",").concat(o[1])},pt=function(t){return t.slice(1).split(/[, ]+/).map((function(t){return parseFloat(t)}))},ht=function(t){var n=function(t){return t.match(/[Mm][(0-9), .-]+/).map((function(t){return pt(t)}))}(t).shift(),e=function(t){return t.match(/[Cc][(0-9), .-]+/).map((function(t){return pt(t)}))}(t).shift(),r=n?[n[n.length-2],n[n.length-1]]:[0,0],o=e?[e[e.length-2],e[e.length-1]]:[0,0];return[].concat(r,o)},vt=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i=J.apply(void 0,n(lt.apply(void 0,r))).slice(0,4);return t.setAttribute("d",dt(i,t._bend,t._pinch)),t},gt={curve:{nodeName:d,attributes:["d"],args:function(){return[dt(J.apply(void 0,n(lt.apply(void 0,arguments))))]},methods:{setPoints:vt,bend:function(t,e){return t._bend=e,vt.apply(void 0,[t].concat(n(ht(t.getAttribute("d")))))},pinch:function(t,e){return t._pinch=e,vt.apply(void 0,[t].concat(n(ht(t.getAttribute("d")))))}}}},mt={};Object.assign(mt,R,V,X,$,H,ft,gt);var yt=Object.keys(mt),bt=[S.h,S.p,S.i],At=[S.g,S.v,S.t,yt],wt={svg:[S.s,S.d].concat(bt).concat(At),g:At,text:[S.cT],linearGradient:[S.cG],radialGradient:[S.cG],defs:bt,filter:[S.cF],marker:At,symbol:At,clipPath:At,mask:At},xt=Object.create(null);Object.keys(wt).forEach((function(t){xt[t]=wt[t].reduce((function(t,n){return t.concat(n)}),[])}));var Et=function(t,n,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=1,a=e/i-e,c=t-a-o,u=n-a-o,s=e+2*a+2*o,f=r+2*a+2*o;return[c,u,s,f].join(" ")};function Ct(){var t=J.apply(void 0,n(lt(arguments)));return 2===t.length&&t.unshift(0,0),4===t.length?Et.apply(void 0,n(t)):void 0}var jt=function(t){return(new(k().DOMParser)).parseFromString("<root></root>","text/xml").createCDATASection("".concat(t))},Ot=function(t){for(;t.lastChild;)t.removeChild(t.lastChild);return t},kt=function(t,n){for(;n.childNodes.length>0;){var e=n.childNodes[0];n.removeChild(e),t.appendChild(e)}return t},Pt=function(t,n){return Array.from(n.attributes).forEach((function(n){return t.setAttribute(n.name,n.value)})),kt(t,n)},St={removeChildren:Ot,appendTo:function(t,n){return null!=n&&n.appendChild(t),t},setAttributes:function(t,n){return Object.keys(n).forEach((function(e){return t.setAttribute(Q.toKebab(e),n[e])}))}},Mt=function(t){return(new(k().DOMParser)).parseFromString(t,"text/xml")},Nt=function(t){var n=t.getElementsByTagName("parsererror");if(n.length>0)throw new Error(n[0]);return function t(n){if(null===n)return n;for(var e=n.childNodes.length-1;e>=0;e-=1){var r=n.childNodes[e];3===r.nodeType&&r.data.match(/^\s*$/)&&n.removeChild(r),1===r.nodeType&&t(r)}return n}(t.documentElement)},Tt=function(n){if(t(n)===s||n instanceof String)try{return Nt(Mt(n))}catch(t){return t}if(null!=n.childNodes)return n},Lt=function(n){return function(n){return t(n)===s&&/^[\w,\s-]+\.[A-Za-z]{3}$/.test(n)&&n.length<1e4}(n)&&E&&t(k().fetch)===a?function(n){return new Promise((function(e,r){if(t(n)===s||n instanceof String)fetch(n).then((function(t){return t.text()})).then((function(t){return Nt(Mt(t))})).then((function(t){return t.nodeName===l?t:t.getElementsByTagName(l)[0]})).then((function(t){return null==t?r(new Error("valid XML found, but no SVG element")):e(t)})).catch((function(t){return r(t)}));else if(n instanceof k().Document)return asyncDone(n)}))}(n):Tt(n)};var _t=function(t,n){if((n=Object.assign({download:!1,output:s,windowStyle:!1,filename:"image.svg"},n)).windowStyle){var e=k().document.createElementNS(P,h);e.setAttribute("type","text/css"),e.innerHTML=function(){var t=[];if(k().document.styleSheets)for(var n=0;n<k().document.styleSheets.length;n+=1){var e=k().document.styleSheets[n];try{for(var r=("cssRules"in e?e.cssRules:e.rules),o=0;o<r.length;o+=1){var i=r[o];"cssText"in i?t.push(i.cssText):t.push("".concat(i.selectorText," {\n").concat(i.style.cssText,"\n}\n"))}}catch(t){console.warn(t)}}return t.join("\n")}(),t.appendChild(e)}var r,o,i,a,c=function(t,n){for(var e=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").split("~::~"),r=e.length,o=!1,i=0,a="",c=null!=n&&"string"==typeof n?n:"\t",u=["\n"],s=0;s<100;s+=1)u.push(u[s]+c);for(var f=0;f<r;f+=1)e[f].search(/<!/)>-1?(a+=u[i]+e[f],o=!0,(e[f].search(/-->/)>-1||e[f].search(/\]>/)>-1||e[f].search(/!DOCTYPE/)>-1)&&(o=!1)):e[f].search(/-->/)>-1||e[f].search(/\]>/)>-1?(a+=e[f],o=!1):/^<\w/.exec(e[f-1])&&/^<\/\w/.exec(e[f])&&/^<[\w:\-\.\,]+/.exec(e[f-1])==/^<\/[\w:\-\.\,]+/.exec(e[f])[0].replace("/","")?(a+=e[f],o||(i-=1)):e[f].search(/<\w/)>-1&&-1===e[f].search(/<\//)&&-1===e[f].search(/\/>/)?a=a+=o?e[f]:u[i++]+e[f]:e[f].search(/<\w/)>-1&&e[f].search(/<\//)>-1?a=a+=o?e[f]:u[i]+e[f]:e[f].search(/<\//)>-1?a=a+=o?e[f]:u[--i]+e[f]:e[f].search(/\/>/)>-1?a=a+=o?e[f]:u[i]+e[f]:e[f].search(/<\?/)>-1||e[f].search(/xmlns\:/)>-1||e[f].search(/xmlns\=/)>-1?a+=u[i]+e[f]:a+=e[f];return"\n"===a[0]?a.slice(1):a}((new(k().XMLSerializer)).serializeToString(t));return n.download&&E&&!C&&(r=n.filename,o=c,i=new(k().Blob)([o],{type:"text/plain"}),(a=k().document.createElement("a")).setAttribute("href",k().URL.createObjectURL(i)),a.setAttribute("download",r),k().document.body.appendChild(a),a.click(),k().document.body.removeChild(a)),n.output===l?t:c},Bt=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var i=1===r.length&&t(r[0])===s?r[0]:Ct.apply(void 0,r);return i&&n.setAttribute(v,i),n},zt=function(t){var n=t.getAttribute(v);return null==n?void 0:n.split(" ").map((function(t){return parseFloat(t)}))},Ft=function(t,n,e){var r=t.createSVGPoint();r.x=n,r.y=e;var o=r.matrixTransform(t.getScreenCTM().inverse());return[o.x,o.y]},Dt=Object.freeze({__proto__:null,setViewBox:Bt,getViewBox:zt,convertToViewBox:Ft}),Gt=function(n,e){var r=Lt(e);if(null!=r)return t(r.then)===a?r.then((function(t){return Pt(n,t)})):Pt(n,r)},Ut=function(n){var e=zt(n);if(void 0!==e)return e;if(t(n.getBoundingClientRect)===a){var r=n.getBoundingClientRect();return[r.x,r.y,r.width,r.height]}return[]},Rt="svg-background-rectangle",qt=function(t,n){var e=function(t){var n=t.getElementsByTagName(h);return 0===n.length?void 0:n[0]}(t);return null==e&&(e=this.Constructor(h),t.insertBefore(e,t.firstChild)),e.textContent="",e.appendChild(jt(n)),e},Vt={clear:function(t){return Array.from(t.attributes).filter((function(t){return"xmlns"!==t})).forEach((function(n){return t.removeAttribute(n.name)})),Ot(t)},size:Bt,setViewBox:Bt,getViewBox:zt,padding:function(t,e){var r=zt(t);return void 0!==r&&Bt.apply(void 0,[t].concat(n([-e,-e,2*e,2*e].map((function(t,n){return r[n]+t}))))),t},background:function(t,e){var r=Array.from(t.childNodes).filter((function(t){return t.getAttribute(i)===Rt})).shift();return null==r&&((r=this.Constructor.apply(this,["rect",null].concat(n(Ut(t))))).setAttribute(i,Rt),r.setAttribute(y,b),t.insertBefore(r,t.firstChild)),r.setAttribute("fill",e),t},getWidth:function(t){return Ut(t)[2]},getHeight:function(t){return Ut(t)[3]},stylesheet:function(t,n){return qt.call(this,t,n)},load:Gt,save:_t},It={math:{vector:function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return[].concat(n)}}},Zt={move:["mousemove","touchmove"],press:["mousedown","touchstart"],release:["mouseup","touchend"],leave:["mouseleave","touchcancel"]},Xt=Object.values(Zt).reduce((function(t,n){return t.concat(n)}),[]),Yt=function(t,n,e){return Object.defineProperty(t,n,{get:function(){return e},enumerable:!0,configurable:!0})},$t=function(t,e){var r;(["pressX","pressY"].filter((function(n){return!Object.prototype.hasOwnProperty.call(t,n)})).forEach((function(n,r){return Yt(t,n,e[r])})),Object.prototype.hasOwnProperty.call(t,"press"))||Yt(t,"press",(r=It.math).vector.apply(r,n(e)))},Ht=function(t){var e=[],r=[];Object.keys(Zt).forEach((function(t){Zt[t].forEach((function(t){r[t]=[]}))}));var o={press:function(t,n){$t(t,e=n)},release:function(){},leave:function(){},move:function(t,n){t.buttons>0&&void 0===e[0]?e=n:0===t.buttons&&void 0!==e[0]&&(e=[]),$t(t,e)}};Object.keys(Zt).forEach((function(e){var i="on".concat(Q.capitalized(e));Object.defineProperty(t,i,{set:function(i){null!=i?Zt[e].forEach((function(a){var c=function(r){var a=null!=r.touches?r.touches[0]:r;if(void 0!==a){var c,u=Ft(t,a.clientX,a.clientY).map((function(t){return Number.isNaN(t)?void 0:t}));if(["x","y"].filter((function(t){return!Object.prototype.hasOwnProperty.call(r,t)})).forEach((function(t,n){return Yt(r,t,u[n])})),!Object.prototype.hasOwnProperty.call(r,"position"))Yt(r,"position",(c=It.math).vector.apply(c,n(u)));o[e](r,u)}i(r)};t.addEventListener&&(r[a].push(c),t.addEventListener(a,c))})):function(n){Zt[n].forEach((function(n){return r[n].forEach((function(e){return t.removeEventListener(n,e)}))}))}(e)},enumerable:!0})})),Object.defineProperty(t,"off",{value:function(){return function(t,n){return Xt.forEach((function(e){n[e].forEach((function(n){return t.removeEventListener(e,n)})),n[e]=[]}))}(t,r)}})},Qt=function(){return Math.random().toString(36).replace(/[^a-z]+/g,"").concat("aaaaa").substr(0,5)},Kt=function(t){var n,e,r={},o=0,i=function(){k().cancelAnimationFrame&&k().cancelAnimationFrame(e),Object.keys(r).forEach((function(t){return delete r[t]})),n=void 0,o=0};Object.defineProperty(t,"play",{set:function(t){if(i(),null!=t){var a=Qt();r[a]=function(i){n||(n=i,o=0),t({time:.001*(i-n),frame:o}),o+=1,r[a]&&(e=k().requestAnimationFrame(r[a]))},k().requestAnimationFrame&&(e=k().requestAnimationFrame(r[a]))}},enumerable:!0}),Object.defineProperty(t,"stop",{value:i,enumerable:!0})},Wt=[["cx","cy"],["x","y"]],Jt=function(e){var r=[0,0],o={selected:!1,svg:void 0,updatePosition:function(t){return t}},i=function(){o.svg&&(o.svg.parentNode||e.appendChild(o.svg),Wt.filter((function(t){return null!=o.svg[t[0]]})).forEach((function(t){return t.forEach((function(t,n){o.svg.setAttribute(t,r[n])}))})))},c=new Proxy(r,{set:function(t,n,e){return t[n]=e,i(),!0}}),u=function(){J.apply(void 0,n(lt.apply(void 0,arguments))).forEach((function(t,n){r[n]=t})),i(),t(r.delegate)===a&&r.delegate.apply(r.pointsContainer,[c,r.pointsContainer])};return r.delegate=void 0,r.setPosition=u,r.onMouseMove=function(t){return o.selected?u(o.updatePosition(t)):void 0},r.onMouseUp=function(){o.selected=!1},r.distance=function(t){return Math.sqrt(B(t,r))},["x","y"].forEach((function(t,n){return Object.defineProperty(r,t,{get:function(){return r[n]},set:function(t){r[n]=t}})})),[l,"updatePosition","selected"].forEach((function(t){return Object.defineProperty(r,t,{get:function(){return o[t]},set:function(n){o[t]=n}})})),Object.defineProperty(r,"remove",{value:function(){var t;(t=o.svg)&&t.parentNode&&t.parentNode.removeChild(t),r.delegate=void 0}}),c},tn=function(n,e,r){var o,i,c=Array.from(Array(e)).map((function(){return Jt(n)})),u=function(n){return t(i)===a?i.call(c,n,o,c):void 0};c.forEach((function(t){t.delegate=u,t.pointsContainer=c}));n.onPress=function(t){c.length>0&&(o=c.map((function(n,e){return{i:e,d:B(n,[t.x,t.y])}})).sort((function(t,n){return t.d-n.d})).shift().i,c[o].selected=!0)},n.onMove=function(t){c.forEach((function(n){return n.onMouseMove(t)}))},n.onRelease=function(){c.forEach((function(t){return t.onMouseUp()})),o=void 0},Object.defineProperty(c,"selectedIndex",{get:function(){return o}}),Object.defineProperty(c,"selected",{get:function(){return c[o]}}),Object.defineProperty(c,"add",{value:function(t){c.push(Jt(n))}}),c.removeAll=function(){for(;c.length>0;)c.pop().remove()};var s={onChange:function(t,n){if(i=t,!0===n){var e=c.length-1;t.call(c,c[e],e,c)}},position:function(t){return c.forEach((function(n,e){return n.setPosition(t.call(c,n,e,c))}))},svg:function(t){return c.forEach((function(n,e){n.svg=t.call(c,n,e,c)}))}};return Object.keys(s).forEach((function(n){c[n]=function(){return t(arguments[0])===a&&s[n].apply(s,arguments),c}})),c.parent=function(t){return null!=t&&null!=t.appendChild&&c.forEach((function(n){t.appendChild(n.svg)})),c},c},nn=function(t){t.controls=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return tn.call.apply(tn,[t,t].concat(e))}},en={svg:{args:function(){return[Ct(J.apply(void 0,arguments))].filter((function(t){return null!=t}))},methods:Vt,init:function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];r.filter((function(n){return t(n)===s})).forEach((function(t){return Gt(n,t)})),r.filter((function(t){return null!=t})).filter((function(n){return t(n.appendChild)===a})).forEach((function(t){return t.appendChild(n)})),Ht(n),Kt(n),nn(n)}}},rn=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var o=e.map((function(t){return Tt(t)})).filter((function(t){return void 0!==t}));return o.filter((function(t){return t.tagName===l})).forEach((function(n){return kt(t,n)})),o.filter((function(t){return t.tagName!==l})).forEach((function(n){return t.appendChild(n)})),t},on={g:{init:rn,methods:{load:rn}}},an=Object.assign(Object.create(null),{svg:[v],line:["x1","y1","x2","y2"],rect:["x","y","width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],polygon:[m],polyline:[m],path:["d"],text:["x","y"],mask:[p],symbol:[p],clipPath:[p,"clip-rule"],marker:[p,"markerHeight","markerUnits","markerWidth","orient","refX","refY"],linearGradient:["x1","x2","y1","y2"],radialGradient:["cx","cy","r","fr","fx","fy"],stop:["offset","stop-color","stop-opacity"],pattern:["patternContentUnits","patternTransform","patternUnits"]}),cn=function(t,n){return t.setAttribute(an.circle[2],n),t},un=function(t,e,r){return n(J.apply(void 0,n(lt(e,r))).slice(0,2)).forEach((function(n,e){return t.setAttribute(an.circle[e],n)})),t},sn=function(t,n,e,r){return[t,n,z([t,n],[e,r])]},fn={circle:{args:function(t,e,r,o){var i=J.apply(void 0,n(lt(t,e,r,o)));switch(i.length){case 0:case 1:return[,,].concat(n(i));case 2:case 3:return i;default:return sn.apply(void 0,n(i))}},methods:{radius:cn,setRadius:cn,origin:un,setOrigin:un,center:un,setCenter:un,position:un,setPosition:un}}},ln=function(t,n,e){return[,,n,e].forEach((function(n,e){return t.setAttribute(an.ellipse[e],n)})),t},dn=function(t,e,r){return n(J.apply(void 0,n(lt(e,r))).slice(0,2)).forEach((function(n,e){return t.setAttribute(an.ellipse[e],n)})),t},pn={ellipse:{args:function(t,e,r,o){var i=J.apply(void 0,n(lt(t,e,r,o))).slice(0,4);switch(i.length){case 0:case 1:case 2:return[,,].concat(n(i));default:return i}},methods:{radius:ln,setRadius:ln,origin:dn,setOrigin:dn,center:dn,setCenter:dn,position:dn,setPosition:dn}}},hn=function(){return J.apply(void 0,n(W.apply(void 0,arguments))).slice(0,4)},vn={line:{args:hn,methods:{setPoints:function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return hn.apply(void 0,e).forEach((function(n,e){return t.setAttribute(an.line[e],n)})),t}}}},gn=/[MmLlSsQqLlHhVvCcSsQqTtAaZz]/g,mn=/-?[0-9]*\.?\d+/g,yn={m:"move",l:"line",v:"vertical",h:"horizontal",a:"ellipse",c:"curve",s:"smoothCurve",q:"quadCurve",t:"smoothQuadCurve",z:"close"};Object.keys(yn).forEach((function(t){var n=yn[t];yn[t.toUpperCase()]=n.charAt(0).toUpperCase()+n.slice(1)}));var bn=function(t){var n=t.getAttribute("d");return null==n?"":n},An=function(t,n){for(var e=arguments.length,r=new Array(e>2?e-2:0),o=2;o<e;o++)r[o-2]=arguments[o];return t.setAttribute("d","".concat(bn(t)).concat(n).concat(lt.apply(void 0,r).join(" "))),t},wn=function(t){return function(t){for(var n,e=[];null!==(n=gn.exec(t));)e.push(n);return e.map((function(n){return{command:t[n.index],index:n.index}})).reduceRight((function(n,e){var r=t.substring(e.index,n.length?n[n.length-1].index:t.length);return n.concat([{command:e.command,index:e.index,chunk:r.length>0?r.substr(1,r.length-1):r}])}),[]).reverse().map((function(t){var n=t.chunk.match(mn);return t.en=yn[t.command],t.values=n?n.map(parseFloat):[],delete t.chunk,t}))}(bn(t))},xn={addCommand:An,appendCommand:An,clear:function(t){return t.removeAttribute("d"),t},getCommands:wn,get:wn,getD:function(t){return t.getAttribute("d")}};Object.keys(yn).forEach((function(t){xn[yn[t]]=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return An.apply(void 0,[n,t].concat(r))}}));var En={path:{methods:xn}},Cn=function(t,n,e){return[,,n,e].forEach((function(n,e){return t.setAttribute(an.rect[e],n)})),t},jn=function(t,e,r){return n(J.apply(void 0,n(lt(e,r))).slice(0,2)).forEach((function(n,e){return t.setAttribute(an.rect[e],n)})),t},On=function(t){return[0,1].forEach((function(n){t[2+n]<0&&(void 0===t[0+n]&&(t[0+n]=0),t[0+n]+=t[2+n],t[2+n]=-t[2+n])})),t},kn={rect:{args:function(t,e,r,o){var i=J.apply(void 0,n(lt(t,e,r,o))).slice(0,4);switch(i.length){case 0:case 1:case 2:case 3:return On([,,].concat(n(i)));default:return On(i)}},methods:{origin:jn,setOrigin:jn,center:jn,setCenter:jn,size:Cn,setSize:Cn}}},Pn={style:{init:function(t,n){t.textContent="",t.appendChild(jt(n))},methods:{setTextContent:function(t,n){return t.textContent="",t.appendChild(jt(n)),t}}}},Sn={text:{args:function(t,e,r){return J.apply(void 0,n(lt(t,e,r))).slice(0,2)},init:function(n,e,r,o,i){var a=[e,r,o,i].filter((function(n){return t(n)===s})).shift();a&&n.appendChild(k().document.createTextNode(a))}}},Mn=function(){return Array.from(arguments).filter((function(n){return t(n)===s||n instanceof String})).shift()||Qt()},Nn=function(){return[Mn.apply(void 0,arguments)]},Tn={mask:{args:Nn},clipPath:{args:Nn},symbol:{args:Nn},marker:{args:Nn,methods:{size:Bt,setViewBox:Bt}}},Ln=function(t){var n=t.getAttribute(m);return null==n?"":n},_n=function(){var t=arguments;return Array.from(Array(Math.floor(arguments.length/2))).map((function(n,e){return"".concat(t[2*e+0],",").concat(t[2*e+1])})).join(" ")},Bn=function(){return[_n.apply(void 0,n(J.apply(void 0,n(W.apply(void 0,arguments)))))]},zn=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.setAttribute(m,Bn.apply(void 0,e)[0]),t},Fn=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return t.setAttribute(m,[Ln(t),Bn.apply(void 0,e)[0]].filter((function(t){return""!==t})).join(" ")),t},Dn=function(){return 1===arguments.length&&t(arguments.length<=0?void 0:arguments[0])===s?[arguments.length<=0?void 0:arguments[0]]:Bn.apply(void 0,arguments)},Gn={polyline:{args:Dn,methods:{setPoints:zn,addPoint:Fn}},polygon:{args:Dn,methods:{setPoints:zn,addPoint:Fn}}},Un=Object.assign({},en,on,fn,pn,vn,En,kn,Pn,Sn,Tn,Gn),Rn={presentation:["color","color-interpolation","cursor","direction","display","fill","fill-opacity","fill-rule","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","opacity","overflow","paint-order","pointer-events","preserveAspectRatio","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tabindex","transform-origin","user-select","vector-effect","visibility"],animation:["accumulate","additive","attributeName","begin","by","calcMode","dur","end","from","keyPoints","keySplines","keyTimes","max","min","repeatCount","repeatDur","restart","to","values"],effects:["azimuth","baseFrequency","bias","color-interpolation-filters","diffuseConstant","divisor","edgeMode","elevation","exponent","filter","filterRes","filterUnits","flood-color","flood-opacity","in","in2","intercept","k1","k2","k3","k4","kernelMatrix","lighting-color","limitingConeAngle","mode","numOctaves","operator","order","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","primitiveUnits","radius","result","seed","specularConstant","specularExponent","stdDeviation","stitchTiles","surfaceScale","targetX","targetY","type","xChannelSelector","yChannelSelector"],text:["dx","dy","alignment-baseline","baseline-shift","dominant-baseline","lengthAdjust","method","overline-position","overline-thickness","rotate","spacing","startOffset","strikethrough-position","strikethrough-thickness","text-anchor","text-decoration","text-rendering","textLength","underline-position","underline-thickness","word-spacing","writing-mode"],gradient:["gradientTransform","gradientUnits","spreadMethod"]};Object.values(S).reduce((function(t,n){return t.concat(n)}),[]).filter((function(t){return void 0===an[t]})).forEach((function(t){an[t]=[]})),[[[l,"defs","g"].concat(S.v,S.t),Rn.presentation],[["filter"],Rn.effects],[S.cT.concat("text"),Rn.text],[S.cF,Rn.effects],[S.cG,Rn.gradient]].forEach((function(t){return t[0].forEach((function(n){an[n]=an[n].concat(t[1])}))}));var qn=function(t){if(null==t)return[];var n=t.getAttribute(i);return null==n?[]:n.split(" ").filter((function(t){return""!==t}))},Vn={addClass:function(t,n){var e=qn(t).filter((function(t){return t!==n}));e.push(n),t.setAttributeNS(null,i,e.join(" "))},removeClass:function(t,n){var e=qn(t).filter((function(t){return t!==n}));t.setAttributeNS(null,i,e.join(" "))},setClass:function(t,n){t.setAttributeNS(null,i,n)},setId:function(t,n){t.setAttributeNS(null,p,n)}},In=function(t){var n=t.getAttribute(g);return null==n||""===n?void 0:n},Zn={clearTransform:function(t){return t.removeAttribute(g),t}};["translate","rotate","scale","matrix"].forEach((function(t){Zn[t]=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return n.setAttribute(g,[In(n),"".concat(t,"(").concat(r.join(" "),")")].filter((function(t){return void 0!==t})).join(" "))}}));var Xn,Yn={};["clip-path","mask","symbol","marker-end","marker-mid","marker-start"].forEach((function(n){Yn[Q.toCamel(n)]=function(e,r){return e.setAttribute(n,function(n){if(null==n)return"";if(t(n)===s)return"url"===n.slice(0,3)?n:"url(#".concat(n,")");if(null!=n.getAttribute){var e=n.getAttribute(p);return"url(#".concat(e,")")}return""}(r))}}));var $n={};(Xn=S.v).push.apply(Xn,n(Object.keys(mt))),Object.keys(mt).forEach((function(t){mt[t].attributes=void 0===mt[t].attributes?n(Rn.presentation):mt[t].attributes.concat(Rn.presentation)})),Object.assign($n,Un,mt),Object.keys(S).forEach((function(t){return S[t].filter((function(t){return void 0===$n[t]})).forEach((function(t){$n[t]={}}))}));var Hn=function(){return Array.from(arguments)};Object.keys($n).forEach((function(t){$n[t].nodeName||($n[t].nodeName=t),$n[t].init||($n[t].init=Hn),$n[t].args||($n[t].args=Hn),$n[t].methods||($n[t].methods={}),$n[t].attributes||($n[t].attributes=an[t]||[])}));var Qn=function(t,n){t.forEach((function(t){return Object.keys(n).forEach((function(e){$n[t].methods[e]=function(){return n[e].apply(n,arguments),arguments[0]}}))}))};Qn(lt(S.t,S.v,S.g,S.s,S.p,S.i,S.h,S.d),Vn),Qn(lt(S.t,S.v,S.g,S.s,S.p,S.i,S.h,S.d),St),Qn(lt(S.v,S.g,S.s),Zn),Qn(lt(S.t,S.v,S.g),Yn);var Kn={svg:{version:"1.1",xmlns:P},style:{type:"text/css"}},Wn=function(t,n){Kn[n]&&Object.keys(Kn[n]).forEach((function(e){return t.setAttribute(e,Kn[n][e])}))},Jn={},te=function t(n,e){for(var r,o,i=arguments.length,a=new Array(i>2?i-2:0),c=2;c<i;c++)a[c-2]=arguments[c];var u=k().document.createElementNS(P,$n[n].nodeName);return e&&e.appendChild(u),Wn(u,n),(r=$n[n]).init.apply(r,[u].concat(a)),(o=$n[n]).args.apply(o,a).forEach((function(t,e){null!=$n[n].attributes[e]&&u.setAttribute($n[n].attributes[e],t)})),$n[n].attributes.forEach((function(t){Object.defineProperty(u,Q.toCamel(t),{value:function(){return u.setAttribute.apply(u,[t].concat(Array.prototype.slice.call(arguments))),u}})})),Object.keys($n[n].methods).forEach((function(t){return Object.defineProperty(u,t,{value:function(){var e;return(e=$n[n].methods[t]).call.apply(e,[Jn,u].concat(Array.prototype.slice.call(arguments)))}})})),xt[n]&&xt[n].forEach((function(n){var e=function(){return t.apply(void 0,[n,u].concat(Array.prototype.slice.call(arguments)))};$n[n].static&&Object.keys($n[n].static).forEach((function(t){e[t]=function(){var e;return(e=$n[n].static)[t].apply(e,[u].concat(Array.prototype.slice.call(arguments)))}})),Object.defineProperty(u,n,{value:e})})),u};Jn.Constructor=te;var ne={};Object.keys(S).forEach((function(t){return S[t].forEach((function(t){ne[t]=function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return te.apply(void 0,[t,null].concat(e))}}))}));var ee=function(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];r.filter((function(n){return t(n)===a})).forEach((function(t){return t.call(n,n)}))};return r.init=function(){var t=arguments,e=te.apply(void 0,[l,null].concat(Array.prototype.slice.call(arguments)));return"loading"===k().document.readyState?k().document.addEventListener("DOMContentLoaded",(function(){return ee.apply(void 0,[e].concat(n(t)))})):ee.apply(void 0,[e].concat(Array.prototype.slice.call(arguments))),e},o.NS=P,o.linker=function(t){var e,r;t.graph&&t.origami&&(t.svg=this,e=this,r=t,["segment","circle","ellipse","rect","polygon"].filter((function(t){return r[t]&&r[t].prototype})).forEach((function(t){r[t].prototype.svg=function(){return e.path(this.svgPath())}})),It.math.vector=r.vector,function(t,e){var r="origami";$n[r]={nodeName:"g",init:function(t){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=e.graph.svg).drawInto.apply(n,[t].concat(o))},args:function(){return[]},methods:$n.g.methods,attributes:$n.g.attributes,static:{}},Object.keys(e.graph.svg).forEach((function(t){$n[r].static[t]=function(n){for(var r,o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var c=(r=e.graph.svg)[t].apply(r,i);return n.appendChild(c),c}})),xt[r]=n(xt.g),xt.svg.push(r),xt.g.push(r),t[r]=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return te.apply(void 0,[r,null].concat(n))},Object.keys(e.graph.svg).forEach((function(n){t[r][n]=e.graph.svg[n]}))}(this,t))}.bind(o),Object.assign(o,ne),o.core=Object.assign(Object.create(null),{load:Lt,save:_t,coordinates:J,flatten:lt,attributes:an,children:xt,cdata:jt},Q,Vn,St,D,Zn,Dt),Object.defineProperty(o,"window",{enumerable:!1,set:function(t){var n;(n=t).document||(n.document=function(t){return(new t.DOMParser).parseFromString("<!DOCTYPE html><title>.</title>","text/html")}(n)),O.window=n,O.window}}),o}));
